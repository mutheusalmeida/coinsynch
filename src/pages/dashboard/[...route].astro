---
import type { UserType } from '@/resources/types'
import { Root } from '../../components/Root'
import Layout from '../../layouts/Layout.astro'
export const prerender = true

export function getStaticPaths() {
  return [{ params: { route: undefined } }, { params: { route: 'analytics' } }]
}

let user = Astro.cookies.get('user')

if (!user.value) {
  return Astro.redirect('/')
}

user = user.json()
---

<Layout>
  <Root user={user as unknown as UserType} client:only />
</Layout>
